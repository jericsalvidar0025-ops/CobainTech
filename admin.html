<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Dashboard ‚Äî CobainTech</title>
<link rel="stylesheet" href="style.css">

<style>
/* ---------------- Global ---------------- */
body { margin:0; font-family:'Segoe UI',Roboto,sans-serif; background:#0b0c0e; color:#eee; }
a { color:inherit; text-decoration:none; }
h1,h2,h3,h4,h5,h6 { margin:0; }
button { cursor:pointer; }

/* ---------------- Header ---------------- */
header { background:#111; padding:12px 24px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 6px rgba(0,0,0,0.5);}
.brand { font-weight:bold; font-size:1.5rem; color:#fff; }
.header-actions button { background:#3498db; border:none; color:#fff; padding:8px 16px; border-radius:6px; transition:0.2s; }
.header-actions button:hover { background:#2980b9; }

/* ---------------- Layout ---------------- */
.container { display:flex; height:calc(100vh - 60px); }
nav.sidebar { width:220px; background:#111; padding:16px; display:flex; flex-direction:column; box-shadow:2px 0 6px rgba(0,0,0,0.5); }
nav.sidebar button { background:none; border:none; color:#eee; text-align:left; padding:12px; margin-bottom:8px; border-radius:6px; font-size:1rem; transition:0.2s; }
nav.sidebar button.active, nav.sidebar button:hover { background:#3498db; color:#fff; }
main.content { flex:1; padding:24px; overflow-y:auto; }

/* ---------------- Cards & Tables ---------------- */
.card { background:#111; padding:16px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.5); margin-bottom:24px; }
table { width:100%; border-collapse:collapse; margin-top:12px; }
th, td { padding:12px; text-align:left; }
th { background:#222; font-weight:600; }
tr:nth-child(even) { background:#1a1a1a; }
tr:hover { background:#2c3e50; }
button.small { padding:6px 12px; border-radius:6px; font-size:.85rem; }

/* ---------------- Inputs ---------------- */
input, select { background:#1a1a1a; color:#eee; border:1px solid #444; border-radius:6px; padding:6px 10px; width:100%; margin-bottom:12px; }
label { display:block; margin-bottom:6px; font-weight:600; }

/* ---------------- Modals ---------------- */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:1000; }
.modal-inner { background:#111; padding:24px; border-radius:12px; max-width:600px; width:90%; box-shadow:0 6px 20px rgba(0,0,0,0.5); }
.modal-inner button.close { float:right; background:#e74c3c; color:#fff; border:none; padding:6px 12px; border-radius:6px; }

/* ---------------- Product Form ---------------- */
#product-form-area { display:none; margin-bottom:24px; }

/* ---------------- Products Grid ---------------- */
.product-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px; margin-top:16px; }
.product-card { background:#1a1a1a; border-radius:12px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.5); display:flex; flex-direction:column; }
.product-card img { width:100%; height:150px; object-fit:cover; }
.product-card .product-info { padding:12px; flex:1; display:flex; flex-direction:column; }
.product-card h4 { margin-bottom:8px; font-size:1rem; }
.product-card p { font-size:.9rem; margin-bottom:4px; }
.product-card .actions { margin-top:auto; display:flex; gap:6px; }

/* ---------------- Sales ---------------- */
.sales-metrics { display:flex; gap:16px; margin-bottom:24px; flex-wrap:wrap; }
.metric { flex:1; min-width:150px; background:#111; padding:16px; border-radius:12px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.5); }
.metric h3 { font-size:1.2rem; margin-bottom:8px; }
.metric p { font-size:1.5rem; font-weight:bold; color:#3498db; }

/* ---------------- Buttons ---------------- */
.btn-store, .btn-logout { background: #3498db; border: none; color: #fff; padding: 8px 16px; border-radius: 6px; font-weight: 500; transition: background 0.2s; }
.btn-store:hover { background: #2980b9; }
.btn-logout { background: #e74c3c; }
.btn-logout:hover { background: #c0392b; }

/* ---------------- Admin Chat ---------------- */
#chat-users .chat-user {
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; background:#111; border-radius:12px; cursor:pointer; transition:0.2s; position:relative;
}
#chat-users .chat-user:hover { background:#3498db; color:#fff; }
.chat-user .left { display:flex; align-items:center; gap:10px; }
.chat-user img.avatar { width:40px; height:40px; border-radius:50%; object-fit:cover; border:2px solid #3498db; }
.chat-user .name-status { display:flex; flex-direction:column; }
.chat-user .name-status span.name { font-weight:bold; color:#eee; }
.chat-user .name-status span.status { font-size:0.75rem; color:#2ecc71; }
.chat-user .status-offline { color:#e74c3c; }
.chat-user .unread { background:#e74c3c; color:#fff; font-size:0.7rem; font-weight:bold; padding:2px 6px; border-radius:12px; position:absolute; right:10px; top:50%; transform:translateY(-50%); display:none; }
.message { max-width:70%; padding:10px 14px; border-radius:12px; word-wrap:break-word; font-size:0.95rem; display:flex; flex-direction:column; }
.message.customer { background:#222; align-self:flex-start; }
.message.admin { background:#3498db; color:#fff; align-self:flex-end; }
.message span.name { font-weight:bold; display:block; margin-bottom:4px; font-size:0.85rem; color:#eee; }
.message span.time { font-size:0.7rem; color:#999; display:block; margin-top:4px; text-align:right; }
</style>
</head>

<body>
<header>
  <div class="brand">CobainTech Admin</div>
  <div class="header-actions" style="display:flex;align-items:center;gap:10px;">
    <span id="welcome-user-top" style="margin-right:10px;"></span>
    <button onclick="window.open('index.html','_blank')" class="btn-store">üè¨ Store</button>
    <button onclick="logoutUser()" class="btn-logout">üîí Logout</button>
  </div>
</header>

<div class="container">
  <nav class="sidebar">
    <button class="active" onclick="showTab('products')">Products</button>
    <button onclick="showTab('orders')">Orders</button>
    <button onclick="showTab('sales')">Sales</button>
    <button onclick="showTab('settings')">Settings</button>
    <button onclick="showTab('chat')">Chat</button>
  </nav>

  <main class="content">
    <!-- Products Tab -->
    <section id="tab-products">
      <div class="card">
        <button onclick="showAddProduct()" class="btn primary">Add Product</button>
        <div id="product-form-area">
          <h3 id="product-form-title">Add Product</h3>
          <form id="product-form" onsubmit="saveProduct(event)">
            <input type="hidden" id="p-id">
            <label>Title <input id="p-title" required></label>
            <label>Price <input type="number" id="p-price" required></label>
            <label>Stock <input type="number" id="p-stock" required></label>
            <label>Category <input id="p-category" required></label>
            <label>Description <input id="p-desc"></label>
            <label>Image URL <input id="p-image-url" placeholder="https://example.com/image.jpg"></label>
            <div style="display:flex;gap:8px;">
              <button type="submit" class="btn primary">Save</button>
              <button type="button" class="btn ghost" onclick="hideProductForm()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <input id="admin-search" placeholder="Search products..." oninput="renderAdminProducts()">
      <div id="admin-product-list" class="product-grid"></div>
    </section>

    <!-- Chat Tab -->
    <section id="tab-chat" style="display:none;">
      <div class="card" style="padding:20px;">
        <h3>Customer Messages</h3>
        <div id="chat-users" style="margin-top:16px; display:flex; flex-direction:column; gap:12px;"></div>

        <div id="chat-admin-box" style="display:none; margin-top:20px; border-top:1px solid #333; padding-top:16px;">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <h4 id="chat-with" style="font-size:1.2rem;"></h4>
            <button onclick="closeChat()" style="background:#e74c3c;color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;">Close</button>
          </div>

          <div id="chat-admin-messages" style="height:300px; overflow-y:auto; background:#1a1a1a; border-radius:12px; padding:12px; display:flex; flex-direction:column; gap:8px;"></div>

          <div style="display:flex; margin-top:10px; gap:8px;">
            <input id="admin-chat-input" placeholder="Type a message..." style="flex:1; padding:8px 12px; border-radius:8px; border:1px solid #333; background:#0b0c0e; color:#eee;">
            <button onclick="adminSendChat()" style="background:#3498db;color:#fff;border:none;padding:8px 16px;border-radius:8px; cursor:pointer;">Send</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Orders Tab -->
    <section id="tab-orders" style="display:none">
      <div class="card">
        <h3>Orders</h3>
        <table>
          <thead>
            <tr>
              <th>Order ID</th>
              <th>Customer</th>
              <th>Items</th>
              <th>Total</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="admin-orders"></tbody>
        </table>
      </div>
    </section>

    <!-- Sales Tab -->
    <section id="tab-sales" style="display:none">
      <div class="card">
        <h3>Sales Overview</h3>
        <div class="sales-metrics">
          <div class="metric">
            <h3>Total Revenue</h3>
            <p id="total-revenue">‚Ç±0</p>
          </div>
          <div class="metric">
            <h3>Total Orders</h3>
            <p id="total-orders">0</p>
          </div>
        </div>
        <canvas id="salesChart" height="250"></canvas>
      </div>
    </section>

    <!-- Settings Tab -->
    <section id="tab-settings" style="display:none">
      <div class="card">
        <h3>Store Settings</h3>
        <form id="settings-form" onsubmit="saveSettings(event)">
          <label>Store Name <input id="store-name" placeholder="CobainTech"></label>
          <label>Store Logo URL <input id="store-logo" placeholder="https://example.com/logo.png"></label>
          <label>Contact Email <input id="store-email" placeholder="support@cobaintech.com"></label>
          <label>Contact Phone <input id="store-phone" placeholder="+63 900 000 0000"></label>
          <button type="submit" class="btn primary">Save Settings</button>
        </form>
      </div>
    </section>

  </main>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
<script src="script.js"></script>
</body>
</html>
